#N canvas 0 23 1680 1005 12;
#X declare -path ./elevon;
#X declare -path ./bop;
#X declare -path ./subpatches;
#X obj 20 20 declare -path ./elevon;
#X obj 20 45 declare -path ./bop;
#X obj 20 120 lvn.telemetry;
#X obj 150 120 bop;
#A saved 0;
#X obj 20 74 declare -path ./subpatches;
#X obj 430 140 gyrosc2pd;
#X obj 430 120 tgl 15 0 empty empty empty 17 7 0 10 #fcfcfc #000000
#000000 1 1;
#X text 430 60 receive gyrOSC data for realtime feedback \; (port
9999), f 45;
#X obj 430 220 unpack f f f;
#X obj 430 370 hsl 128 15 -1.5708 1.5708 0 0 empty empty empty -2 -8
0 10 #fcfcfc #000000 #000000 6304 1;
#X obj 470 340 hsl 128 15 3.14159 -3.14159 0 0 empty empty empty -2
-8 0 10 #fcfcfc #000000 #000000 6316 1;
#X obj 160 530 hsl 128 15 0 360 0 0 empty empty empty -2 -8 0 10 #fcfcfc
#000000 #000000 5971 1;
#X obj 720 220 unpack f f f;
#X obj 160 470 hsl 128 15 -3 3 0 0 empty empty empty -2 -8 0 10 #fcfcfc
#000000 #000000 6344 1;
#X obj 160 420 hsl 128 15 -3 3 0 0 empty empty empty -2 -8 0 10 #fcfcfc
#000000 #000000 6351 1;
#X obj 160 370 hsl 128 15 -3 3 0 0 empty empty empty -2 -8 0 10 #fcfcfc
#000000 #000000 6366 1;
#X obj 880 220 unpack f f f;
#X obj 159 689 hsl 128 15 -3 3 0 0 empty empty empty -2 -8 0 10 #fcfcfc
#000000 #000000 6352 1;
#X obj 159 639 hsl 128 15 -3 3 0 0 empty empty empty -2 -8 0 10 #fcfcfc
#000000 #000000 6352 1;
#X obj 159 589 hsl 128 15 -3 3 0 0 empty empty empty -2 -8 0 10 #fcfcfc
#000000 #000000 6352 1;
#X text 960 310 X (roll);
#X text 920 340 Y (pitch);
#X text 1000 280 Z (yaw);
#X obj 920 310 s rvx;
#X obj 880 340 s rvy;
#X obj 960 280 s rvz;
#X obj 159 659 r rvz;
#X obj 159 609 r rvx;
#X obj 160 560 r rvy;
#X text 610 340 X (roll);
#X text 570 370 Y (pitch);
#X obj 760 250 * -1;
#X obj 800 250 * -1;
#X obj 720 250 * -1;
#X obj 800 280 s az;
#X obj 760 310 s ax;
#X obj 720 340 s ay;
#X obj 160 440 r ay;
#X obj 160 390 r ax;
#X obj 160 340 r az;
#X text 840 280 up;
#X text 760 340 right;
#X text 800 310 forward;
#X obj 510 250 sub.bop.util.scale -3.14159 3.14159 0 360, f 22;
#X obj 510 290 s h;
#X text 550 290 heading;
#X obj 160 500 r h;
#X obj 1110 220 unpack f f f f;
#X obj 1110 260 s rw;
#X obj 1150 260 s rx;
#X obj 1190 260 s ry;
#X obj 1230 260 s rz;
#X obj 430 530 vsl 15 128 -1 1 0 0 empty empty empty 0 -9 0 10 #fcfcfc
#000000 #000000 28 1;
#X obj 470 530 vsl 15 128 -1 1 0 0 empty empty empty 0 -9 0 10 #fcfcfc
#000000 #000000 6381 1;
#X obj 510 530 vsl 15 128 -1 1 0 0 empty empty empty 0 -9 0 10 #fcfcfc
#000000 #000000 6293 1;
#X obj 430 490 r rw;
#X obj 470 490 r rx;
#X obj 510 490 r ry;
#X obj 550 490 r rz;
#X obj 550 530 vsl 15 128 -1 1 0 0 empty empty empty 0 -9 0 10 #fcfcfc
#000000 #000000 6944 1;
#X text 20 490 X = forward \; Y = right \; Z = up \; ;
#X obj 765 589 vsl 15 128 -1 1 0 0 empty empty empty 0 -9 0 10 #fcfcfc
#000000 #000000 6458 1;
#X obj 760 540 expr -1 * (2 * ($f2*$f4 - $f1*$f3));
#X text 787 704 left;
#X text 787 586 right;
#X text 797 646 y;
#X obj 764 499 r rw;
#X obj 804 499 r rx;
#X obj 844 499 r ry;
#X obj 900 500 r rz;
#X obj 1090 589 vsl 15 128 -1 1 0 0 empty empty empty 0 -9 0 10 #fcfcfc
#000000 #000000 6401 1;
#X obj 1089 499 r rw;
#X obj 1129 499 r rx;
#X obj 1169 499 r ry;
#X obj 1225 500 r rz;
#X obj 1085 540 expr -1 * (2 * ($f1*$f2 - $f3*$f4));
#X text 1120 708 bottom;
#X text 1120 590 top;
#X text 1130 650 x;
#X obj 1380 590 vsl 15 128 -1 1 0 0 empty empty empty 0 -9 0 10 #fcfcfc
#000000 #000000 1 1;
#X obj 1379 500 r rw;
#X obj 1419 500 r rx;
#X obj 1459 500 r ry;
#X obj 1515 501 r rz;
#X text 1410 709 bottom;
#X text 1410 591 top;
#X text 1420 651 x;
#X obj 1375 541 expr -1* ($f1 * $f1 - $f2 * $f2 - $f3 * $f3 + $f4 *
$f4);
#X obj 430 170 route gyro accel rrate quat, f 132;
#X text 1140 410 gx = 2 * (q1*q3 - q0*q2) \; gy = 2 * (q0*q1 + q2*q3)
\; gz = q0*q0 - q1*q1 - q2*q2 + q3*q3 \; ;
#X text 590 490 todo - get pitch \, yaw \; ;
#X text 1140 380 calculate gravity vector from quaternion ðŸ›°;
#X connect 5 0 88 0;
#X connect 6 0 5 0;
#X connect 8 0 9 0;
#X connect 8 1 10 0;
#X connect 8 2 43 0;
#X connect 12 0 33 0;
#X connect 12 1 31 0;
#X connect 12 2 32 0;
#X connect 16 0 24 0;
#X connect 16 1 23 0;
#X connect 16 2 25 0;
#X connect 26 0 17 0;
#X connect 27 0 18 0;
#X connect 28 0 19 0;
#X connect 31 0 35 0;
#X connect 32 0 34 0;
#X connect 33 0 36 0;
#X connect 37 0 13 0;
#X connect 38 0 14 0;
#X connect 39 0 15 0;
#X connect 43 0 44 0;
#X connect 46 0 11 0;
#X connect 47 0 48 0;
#X connect 47 1 49 0;
#X connect 47 2 50 0;
#X connect 47 3 51 0;
#X connect 55 0 52 0;
#X connect 56 0 53 0;
#X connect 57 0 54 0;
#X connect 58 0 59 0;
#X connect 62 0 61 0;
#X connect 66 0 62 0;
#X connect 67 0 62 1;
#X connect 68 0 62 2;
#X connect 69 0 62 3;
#X connect 71 0 75 0;
#X connect 72 0 75 1;
#X connect 73 0 75 2;
#X connect 74 0 75 3;
#X connect 75 0 70 0;
#X connect 80 0 87 0;
#X connect 81 0 87 1;
#X connect 82 0 87 2;
#X connect 83 0 87 3;
#X connect 87 0 79 0;
#X connect 88 0 8 0;
#X connect 88 1 12 0;
#X connect 88 2 16 0;
#X connect 88 3 47 0;
