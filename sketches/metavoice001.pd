#N struct text float x float y text t;
#N canvas 720 23 720 855 12;
#X obj 140 380 lvn.hyperstave 3;
#X text 200 350 Elevation;
#X obj 140 510 route 0 1 2, f 35;
#X msg 240 300 connect 0;
#N canvas 892 110 450 300 up 0;
#X obj 100 100 inlet;
#X obj 100 150 lvn.stave;
#X connect 0 0 1 0;
#X restore 140 560 pd up;
#N canvas 600 23 840 855 level 1;
#X obj 100 100 inlet;
#N canvas 151 23 1289 855 north 1;
#X obj 100 100 inlet;
#X obj 100 150 lvn.stave;
#X floatatom 340 80 5 0 0 0 - - -, f 5;
#X floatatom 300 -40 5 0 0 0 - - -, f 5;
#X floatatom 320 20 5 0 0 0 - - -, f 5;
#X msg 300 -10 button \$1;
#X msg 320 50 playhead \$1;
#X obj 730 400 tgl 15 0 empty empty empty 17 7 0 10 #fcfcfc #000000
#000000 1 1;
#X floatatom 810 330 5 0 0 0 - - -, f 5;
#X floatatom 888 248 5 0 0 0 - - -, f 5;
#X msg 970 170 0 1 0;
#N canvas 0 22 450 300 prepend-set 0;
#X obj 40 80 list prepend set;
#X obj 40 110 list trim;
#X obj 13 26 inlet;
#X obj 13 183 outlet;
#X connect 0 0 1 0;
#X connect 1 0 3 0;
#X connect 2 0 0 0;
#X restore 970 120 pd prepend-set;
#X obj 730 80 route active relativepos distance coords, f 46;
#X text 760 400 useful for enabling/disbaling subpatch;
#X text 850 330 useful for controlling embedded hyperstaves \, and
spatial panning, f 64;
#X text 938 248 useful for volume automation;
#X text 1010 170 useful for reusable generative algorithms;
#X obj 730 470 tgl 15 0 empty empty empty 17 7 0 10 #fcfcfc #000000
#000000 1 1;
#X floatatom 840 480 5 0 0 0 - - -, f 5;
#X text 758 378 ACTIVE;
#X text 848 308 RELATIVEPOS;
#X text 938 228 DISTANCE;
#X text 1010 150 COORDS;
#N canvas 325 110 450 300 smooth-switch 0;
#X obj 40 110 line;
#X msg 40 80 \$1 750;
#X obj 40 180 change;
#X obj 40 40 inlet;
#X obj 90 180 outlet;
#X obj 40 210 outlet;
#X obj 40 150 > 0.001;
#X connect 0 0 4 0;
#X connect 0 0 6 0;
#X connect 1 0 0 0;
#X connect 2 0 5 0;
#X connect 3 0 1 0;
#X connect 6 0 2 0;
#X restore 730 440 pd smooth-switch;
#X text 880 480 üëà use to smoothly fade subpatch;
#X msg 340 110 message \$1;
#X text 430 -10 control stave toggle;
#X text 430 50 control stave slider;
#X text 430 90 all other messages are forward to parent hyperstave
and are output from its bottom right outlet, f 35;
#X text 390 250 local send and receives are local to this subpatch
, f 26;
#X obj 290 350 inlet;
#X obj 290 380 route notes;
#X obj 260 1000 bop.mix;
#A saved 0 0.988991 -0.019946;
#X msg 490 940 amp \$1;
#X obj 810 360 lvn.localsend pos;
#X obj 680 870 lvn.localreceive pos;
#X msg 680 940 pan \$1;
#X obj 890 280 lvn.localsend distance;
#X obj 490 870 lvn.localreceive distance;
#X obj 840 510 lvn.localsend off;
#X obj 370 1120 lvn.localreceive off;
#X obj 260 1150 *~;
#X obj 367 1154 change;
#X obj 330 1150 *~;
#X obj 970 200 lvn.localsend coords;
#X text 1400 1270 üêâ;
#X obj 260 1220 outlet~;
#X obj 330 1220 outlet~;
#X text 400 1220 pass audio back up to parent;
#X obj 370 20 lvn.localreceive off;
#X obj 680 230 lvn.localreceive distance;
#X obj 676 270 < 0.65;
#X obj 490 910 bz/scale 0.5 0 0.6 1;
#X obj 290 410 unpack;
#X obj 292 445 + 12;
#X obj 309 477 pack;
#X obj 680 910 bz/scale -0.2 1.2 1 -1;
#X obj 180 650 bop.sampler;
#A saved cayn02.wav 0 -6.20225 0.804348 0 0 0 1;
#X obj 370 570 r master-tick;
#X text 490 840 TODO double check this scaling;
#X connect 0 0 1 0;
#X connect 1 1 12 0;
#X connect 2 0 25 0;
#X connect 3 0 5 0;
#X connect 4 0 6 0;
#X connect 5 0 1 1;
#X connect 6 0 1 1;
#X connect 7 0 23 0;
#X connect 8 0 34 0;
#X connect 9 0 37 0;
#X connect 10 0 44 0;
#X connect 11 0 10 0;
#X connect 12 1 8 0;
#X connect 12 2 9 0;
#X connect 12 3 11 0;
#X connect 17 0 3 0;
#X connect 18 0 39 0;
#X connect 23 0 17 0;
#X connect 23 1 18 0;
#X connect 25 0 1 1;
#X connect 30 0 31 0;
#X connect 31 0 53 0;
#X connect 32 0 41 0;
#X connect 32 1 43 0;
#X connect 33 0 32 3;
#X connect 35 0 56 0;
#X connect 36 0 32 3;
#X connect 38 0 52 0;
#X connect 40 0 42 0;
#X connect 41 0 46 0;
#X connect 42 0 41 1;
#X connect 42 0 43 1;
#X connect 43 0 47 0;
#X connect 49 0 6 0;
#X connect 50 0 51 0;
#X connect 51 0 7 0;
#X connect 52 0 33 0;
#X connect 53 0 54 0;
#X connect 53 1 55 1;
#X connect 54 0 55 0;
#X connect 55 0 57 2;
#X connect 56 0 36 0;
#X connect 57 0 32 0;
#X connect 57 1 32 1;
#X connect 58 0 57 2;
#X restore 90 1110 pd north;
#X obj 120 190 r h;
#X obj 121 229 / 360;
#X msg 120 260 hue \$1;
#X obj 100 130 lvn.stave;
#X obj 150 620 r h;
#X obj 150 900 bop.notelist;
#A saved c3\ e3\ d3\ f#3\ e3\ g3\ f#3\ a3\ g3\ b3\ a3\ c4\ b3\ d4\ c4\ a3\ b3\ g3\ a3\ f#3\ g3\ e3\ f#3\ d3\ e3\ c3\ d3\ b2
0;
#X obj 150 740 int;
#X msg 150 820 note \$1;
#X obj 150 780 change;
#X obj 360 830 bz/prepend notelist;
#X msg 460 580 c3 e3 d3 f#3 e3 g3 f#3 a3 g3 b3 a3 c4 b3 d4 c4 a3 b3
g3 a3 f#3 g3 e3 f#3 d3 e3 c3 d3 b2;
#X obj 500 710 list length;
#X floatatom 500 741 5 0 0 0 - - -, f 5;
#X obj 150 650 / 360;
#X obj 150 710 *;
#X obj 460 670 t l l, f 6;
#X text 460 550 C lydian up and down in running thirds;
#X obj 500 771 lvn.localsend notelist-length;
#X obj 160 680 lvn.localreceive notelist-length;
#X obj 150 1000 bz/prepend notes;
#X text 460 520 change the notelist from latitude and longitude or
similar;
#X obj 340 550 loadbang;
#X obj 230 1160 outlet~;
#X obj 90 1160 outlet~;
#X text 350 40 The notes for the metavoice should not primarily be
pulled from rotation - that should be a flourish. Rather the meta voice
is driven by other melodic/harmonic data;
#X text 350 100 A glok would be good for the flourish;
#X obj 100 320 lvn.hyperstave 3;
#X obj 100 420 route 0 1 2, f 27;
#X text 320 340 A lower density hyperstave so that the north sound
is heard in across full field of view, f 34;
#X text 210 280 Crunchy ground;
#X connect 0 0 5 0;
#X connect 1 0 25 0;
#X connect 1 1 24 0;
#X connect 2 0 3 0;
#X connect 3 0 4 0;
#X connect 4 0 28 0;
#X connect 5 0 28 0;
#X connect 6 0 15 0;
#X connect 7 2 21 0;
#X connect 8 0 10 0;
#X connect 9 0 7 3;
#X connect 10 0 9 0;
#X connect 11 0 7 3;
#X connect 12 0 17 0;
#X connect 13 0 14 0;
#X connect 14 0 19 0;
#X connect 15 0 16 0;
#X connect 16 0 8 0;
#X connect 17 0 11 0;
#X connect 17 1 13 0;
#X connect 20 0 16 1;
#X connect 21 0 1 1;
#X connect 23 0 12 0;
#X connect 28 0 29 0;
#X connect 29 0 1 0;
#X restore 220 560 pd level;
#N canvas 892 110 450 300 down 0;
#X obj 100 100 inlet;
#X obj 100 150 lvn.stave;
#X connect 0 0 1 0;
#X restore 300 560 pd down;
#X obj 400 230 r ax;
#X obj 400 259 r ay;
#X obj 400 288 r az;
#X obj 440 230 r rvx;
#X obj 440 259 r rvy;
#X obj 440 288 r rvz;
#X obj 490 230 r inv;
#X msg 140 300 hue \$1;
#X obj 140 220 r pitch;
#N canvas 553 94 793 496 map-pitch 0;
#X obj 20 110 % 360;
#X obj 20 80 + 90;
#X text 110 200 inverted;
#X text 320 200 upright;
#X obj 170 200 moses 180, f 20;
#X obj 20 40 inlet;
#X obj 170 360 outlet;
#X text 20 10 scale pitch such that 0 and 180 degrees both return 0.5
;
#X obj 170 240 bz/scale 0 180 1 0;
#X obj 310 240 bz/scale 360 180 1 0;
#X floatatom 20 269 5 0 0 0 - - -, f 5;
#X obj 20 240 bz/scale 0 -90 1 0;
#X obj 20 150 moses 0;
#X connect 0 0 12 0;
#X connect 1 0 0 0;
#X connect 4 0 8 0;
#X connect 4 1 9 0;
#X connect 5 0 1 0;
#X connect 8 0 6 0;
#X connect 9 0 6 0;
#X connect 10 0 6 0;
#X connect 11 0 10 0;
#X connect 12 0 11 0;
#X connect 12 1 4 0;
#X restore 140 260 pd map-pitch;
#X text 400 200 expression input parameters;
#X obj 192 102 inlet;
#X obj 190 140 switch~;
#X obj 220 890 bop.send;
#A saved master;
#X obj 220 600 bop.reverb;
#A saved 0.866848 0.516304 1.69565 0.0251917 0.521665 0 0;
#X obj 220 780 bop.mix;
#A saved 0 0.557734 0;
#X floatatom 260 240 5 0 0 0 - - -, f 5;
#X obj 297 258 loadbang;
#X text 510 110 pull in an array of hue values in the right inlet.
Leave mapping outside of voice, f 28;
#X obj 450 90 inlet;
#X connect 0 0 2 0;
#X connect 2 0 4 0;
#X connect 2 1 5 0;
#X connect 2 2 6 0;
#X connect 3 0 0 0;
#X connect 5 0 21 0;
#X connect 5 1 21 1;
#X connect 14 0 0 0;
#X connect 15 0 16 0;
#X connect 15 0 23 0;
#X connect 16 0 14 0;
#X connect 18 0 19 0;
#X connect 21 0 22 0;
#X connect 21 1 22 1;
#X connect 22 0 20 0;
#X connect 22 1 20 1;
#X connect 24 0 3 0;
